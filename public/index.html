<!DOCTYPE html>
<html>
  <head>
    <!-- 
      firebase deploy
      firebase emulators:start
    -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PEC Promo Club</title>
    <script defer src="/__/firebase/7.7.0/firebase-app.js"></script>
    <script defer src="/__/firebase/7.7.0/firebase-auth.js"></script>
    <script defer src="/__/firebase/7.7.0/firebase-database.js"></script>
    <script defer src="/__/firebase/7.7.0/firebase-messaging.js"></script>
    <script defer src="/__/firebase/7.7.0/firebase-storage.js"></script>
    <script defer src="/__/firebase/init.js"></script>
    <script defer src="app.js"></script>

    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.orange-indigo.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>

  </head>

<body onload="autoLogin()">
  <!-- <div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-header">

  <main class="mdl-layout__content mdl-color--grey-100">
    <div class="mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-grid">

      <div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-desktop">
        <div class="mdl-card__title mdl-color--light-blue-600 mdl-color-text--white">
          <h2 class="mdl-card__title-text">Firebase Email &amp; Password Authentication</h2>
        </div>
        <div class="mdl-card__supporting-text mdl-color-text--grey-600">
          <p>Enter an email and password below and either sign in to an existing account or sign up</p>

          <input class="mdl-textfield__input" style="display:inline;" type="text" id="email" name="email" placeholder="Email"/>
          &nbsp;&nbsp;&nbsp;
          <input class="mdl-textfield__input" style="display:inline;" type="password" id="password" name="password" placeholder="Password"/>
          <br/><br/>
          <button disabled class="mdl-button mdl-js-button mdl-button--raised" id="quickstart-sign-in" name="signin">Sign In</button>
          &nbsp;&nbsp;&nbsp;
          <button class="mdl-button mdl-js-button mdl-button--raised" id="quickstart-sign-up" name="signup">Sign Up</button>
          &nbsp;&nbsp;&nbsp;
          <button class="mdl-button mdl-js-button mdl-button--raised" disabled id="quickstart-verify-email" name="verify-email">Send Email Verification</button>
          &nbsp;&nbsp;&nbsp;
          <button class="mdl-button mdl-js-button mdl-button--raised" id="quickstart-password-reset" name="verify-email">Send Password Reset Email</button>

          <div class="quickstart-user-details-container">
            Firebase sign-in status: <span id="quickstart-sign-in-status">Unknown</span>
            <div>Firebase auth <code>currentUser</code> object value:</div>
            <pre><code id="quickstart-account-details">null</code></pre>
          </div>
        </div>
      </div>

    </div>
  </main>
</div> -->
<page id="login">
  <signin>
    <input type="text" id="inemail" placeholder="Email">
    <input type="password" id="inpass" placeholder="Password">
    <button id="signin" onclick="signIn()">Sign-in</button>
    <br>
    <button style="background:none;border:none" onclick="passReset()">Forgot password?</button style="background:none;border:none">
  </signin>
  <br>
  <signup>
    <input type="text" id="upname" placeholder="Name">
    <input type="text" id="upemail" placeholder="Email">
    <input type="password" id="uppassword" placeholder="Password">
    <button id="signup" onclick="handleSignUp()">Sign-up</button>
  </signup>
</page>
<page id="home" style="display:none">
  <name id="dispname"></name>
      <button onclick="signOut()">Sign out</button>
</page>
<script>
function signIn(){
    var email = inemail.value;
    var password = inpass.value;
    if (email.length < 4 || !email.match("@")) {
      alert('Please enter an email address');
      return;
    }
    if (password.length < 4) {
      alert('Please enter a password');
      return;
    }
    firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
      var errorCode = error.code;
      var errorMessage = error.message;
      if (errorCode === 'auth/wrong-password') {
        alert('Wrong password.');
      } else {
        alert(errorMessage);
      }
      console.log(error);
    });
  // alert('Signed in');
  // window.location.href="home.html";
  login.style.display="none";
  home.style.display="block";
  let usr = firebase.auth().currentUser;
  dispname.innerHTML=usr.displayName;

  disp();
}
function signOut() {
  if (firebase.auth().currentUser) {
    firebase.auth().signOut();
    // alert('Signed out');  
      login.style.display = "block";
    home.style.display = "none";
  }
}

</script>
</body>
</html>
